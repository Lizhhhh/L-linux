# Linux系统特点
开放性、多用户、多任务、良好的用户界面、优异的性能与稳定性

- 单用户:
只允许同时登录一个用户进行操作

- 多用户:
允许同时登录多个用户进行操作

- 单任务:
不允许用户同时进行多个操作任务

- 多任务:
 允许用户同时进行多个操作任务

 Windows: 单用户、多任务
 Linux: 多用户、多任务


 # Linux分支
ubuntu
debian
centos(Community Enterprise Operating System)
redhat
ghsuse...

# Linux系统的安装
真机安装: 直接在硬件上面安装,启动即是Linux
虚拟机安装: 通过一些特点的手段,来进行模拟安装;并不会影响当前计算机的真实操作系统

# 虚拟机软件
- 什么是虚拟机?
使用真机安装代价太大,因此而诞生的一款可以模拟操作系统运行的软件.

目前2款比较有名的虚拟机:vmware出品的 vmware workstation、oracle出品的 virtual box

- 下载并安装虚拟机软件:(本次尝试 VMware Workstation)
- 下载镜像: CentOS 6.1
- https://opsx.alibaba.com/mirror
此处的镜像可以理解为系统启动程序,此处下载的镜像名称: CentOS-6.10-x86_64-bin-DVD1.iso (作为启动盘)

# 在VMware Workstation中创建虚拟机
1. 文件 -> 新建虚拟机
2. 自定义(高级) -> 下一步 -> 下一步
3. 稍后安装操作系统(S) -> 下一步(N)
4. Linux -> CentOS 64位 -> 下一步
5. 更改名字和虚拟机的位置 -> 下一步
6. 选择CPU数量 1*1 -> 下一步
7. 分配内存 -> N
8. 使用网络地址转换(NAT) -> N -> N -> N -> N
9. 磁盘大小20G -> 将虚拟磁盘拆分成多个文件 -> N -> N -> 完成

# 加载镜像配置启动盘(略)

# 终端
 - 通过终端关闭计算机:
 shutdown -h now(正常关机)、halt(关闭内存)、init 0

# 使用VMware备份操作系统
在vm中备份方式有2种:
 - 快照:
   又成还原点,保存在拍快照时候的系统的状态,在后期的时候随时可以恢复[短期备份,做快照时,虚拟机的操作系统一般处于开启状态]
   找到最上面的工具栏 -> 虚拟机 -> 快照 -> 拍摄快照
 - 克隆:
   复制一个一模一样的[长期备份,做克隆时必须是关闭状态]

# 文件夹
- bin
全称binary,含义是二进制。该目录种存储的都是一些二进制文件,文件都可以被运行的

- dev
该目录种存放的是外接设备,例如盘、其他的光盘等。在其中的外接设备是不能直接被使用的,需要挂载(类似windows下的分配盘符)

- etc
该目录主要存储一些配置文件

- home
表示除了root用户以外,其他用户的家目录

- proc:
全程process:表示进程,该目录种存储的是Linux运行时候的进程

- root:
该目录是root用户自己的家目录

- sbin:
super binary:该目录存储一些可以被执行的二进制文件,但是需要super权限(超级管理员)才能执行

- tmp:
temporary,表示临时的,系统运行的时候产生的临时文件,都会存储在这个目录种

- usr:
存放用户自己安装的软件,类似windows的program files

- var:
存放的是 程序/系统 的日志文件

- mnt:
外接设备如果需要挂载时,就需要挂载mnt目录下

# 指令与选项
- 什么是Linux的指令?
在Linux终端(命令行)中输入的内容称之为指令

- Linux通用的指令格式
````javascript
# 指令主体 [选项] [操作对象]
````
注: 1. 一个指令只能包含一个指令主体
    2. 一个指令可能包含0个或多个选项
    3. 不选操作对象,默认会选择当前的目录

# 关于路径(重要):
- 1、相对路径
参照物(参照当前的目录)
'./'表示当前目录
'../'表示上级目录

- 2、绝对路径
参照物(固定参照根'/')

## 基础命令
# 1、ls(list)
 - 用法1: # ls
 - 含义: 列出当前工作目录下所有的 文件/文件夹 的名称

 - 用法2: # ls 路径
 - 含义: 列出指定路径目录下所有的 文件/文件夹 的名称

 - 用法3: # ls 选项 路径
 - 含义: 以指定的格式来显示指定目录下文件夹的名称
 - 栗子: # ls -l
 路径 -->> 表示以列表的形式进行展示
 - 栗子2: # ls -la
 路径 -->> 表示所有的 文件/文件夹 (包含隐藏的)

 - 注:
 1.显示出来的第一列表示文档的类型,'-'表示该行对应的文档类型为文件,'d'表示文档类型为文件夹
 2.在Linux中隐藏的文档一般以.开头

 - 用法4: # ls -lh 路径
 - 含义: 列出指定

 - 注:ls列出的结果颜色说明,蓝色表示文件夹、黑色表示文件、绿色代表对该 文件/文件夹 拥有绝对权限

# 2、pwd (print working directory)
 - 含义: 显示当前工作目录

# 3、cd (change directory)
 - 作用: 切换当前的工作目录
 - 语法: # cd 路径
 - 栗子: 在'/'下,使用绝对路径切换到/usr/local
 ````bash
 # cd /usr/local
 ````
 - 栗子2: 在'/usr/local'下,使用相对命令切换到home目录下的marron用户
 ````bash
 # cd ../../home/marron
 ````
 - 栗子3: 在任意位置,快速切到当前用户的家目录
 ````bash
 # cd ~
 ````
# 4、mkdir指令 (make directory,创建目录)
 - 语法: # mkdir 路径
 - 栗子: 在当前路径下创建出'marron111'目录
 ````bash
 # mkdir marron111
 ````
 - 栗子2: 在当前用户的家目录下创建'marron111'目录
 ````bash
 # mkdir ~/marron111
 ````
 - 语法2: # mkdir -p
 - 作用: 实现创建多层目录(不存在))

 - 语法3: # mkdir 路径1 路径2 路径3
 - 作用: 一次创建多个目录

# 5、touch指令
 - 作用: 创建文件
 - 语法: # touch 文件路径
 - 栗子: 在当前目录下创建一个'a.js'
 ````bash
 # touch a.js
 ````
 - 栗子2: 在'marron'用户的家目录中创建文件'a.js'
 ````bash
 # touch /home/marron/a.js
 ````

# 6、cp (copy)
 - 作用: 复制 文件/文件夹 到指定的位置
 - 语法: # cp 被复制的 文件/文件夹 路径到 文件/文件夹 复制到的位置
 - 栗子: 将'/'目录下的'b.js'文件复制到'/home/marron'目录中
 ````bash
 # cp /b.js /home/marron/
 ````
 - 选项说明:
 -r: 复制文件夹所带的可选项(表示递归复制)
 - 栗子: 复制'/'目录下的'marron111'文件到'/home/marron'目录中去
 ````bash
 # cp /marron111 /home/marron -r
 ````
# 7、mv(move)
 - 作用: 移动 文件/文件夹 到新位置
 - 语法: # mv 需要移动的 文件/文件夹 路径到 文件/文件夹 需要移动到的位置

# 8、rm(remove)
 - 作用: 移出/删除 文档
 - 语法: #rm 选项 需要移出的文档路径
 - 栗子: 删除一个文件(/a.js)
 ````bash
 rm a.js
 ````
 - 栗子2: 删除一个文件(/b.js)(不提示)
 ````bash
 rm b.js -f
 ````
 - 注: -f表示 force 强制删除,即不提示
 - 栗子3: 删除一个文件夹(/marron)(不提示)
 ````bash
 rm marron -rf
 ````
 - 注: -r表示递归删除,即删除marron文件夹的时候,其中的内容也给删除掉

# 9、vim(一款文本编辑器)
 - 语法: # vim 文件的路径
 - 作用: 打开一个文件(可以存在,也可以不存在)

 - 注: 退出文件, shitf + : -> q -> enter(回车)

# 10、输出重定向
 - 作用:将一些命令的结果保存到文件中
 ````bash
 >: 覆盖输出,会覆盖掉原先的文件
 >>:追加输出,不会覆盖原始文件,会在原始内容末尾继续追加
 ````
 - 栗子: 保存 ls-la 的执行结果到当前目录下的 ls.txt (覆盖)
 ````bash
 ls -la > ls.txt
 ````

# 11、cat
 - 作用1: 把文件中的内容展示出来
 - 语法1: # cat 文件的路径

 - 作用2: 文件合并
 - 语法2: # cat 文件路径1 文件路径2 ... 文件路径n > [新文件名称]


## 进阶指令(重点)
# 1、df 指令
 - 作用: 查看磁盘空间
 - 语法: # df -h
 - 注:
 -h:以较高可读性的方式展示出来

# 2、free 指令
 - 作用: 查看内存使用情况
 - 语法: # free -m
 - 注:
 -m:以M的单位显示内存情况
 -/+ buffers/cache: free 代表真实可用的内存为 xx Mb
 Swap: 表示,临时将硬盘当作内存的数量(Linux系统自动分配的)

# 3、head 指令
 - 作用: 查看一个文件的前n行, 如不指定n, 则默认显示前10行
 - 语法: # head -n 文件路径

# 4、tail 指令
 - 作用1: 查看一个文件的后10行, 如不指定n,则默认显示后10行
 - 语法1: # tail -n 文件路径

 - 作用2: 通过tail指令来查看一个文件的动态变化
 - 语法2: # tail -f 文件路径
 - 注:
 -f:是观察文件的变化.可用使用输出重定向(>)来完成,手动打开添加则无法监测

# 5、less 指令
 - 作用: 查看部分文件,若想继续看下去,则需要按下辅助功能键
 - 语法: # less 文件路径

# 6、wc 指令
 - 作用: 统计文件内容信息
 - 语法: # wc -lwc 文件路径
 - 注:
 -l: 行数
 -w: 单词数(依照空格来识别的)
 -c： 字节数

# 7、date 指令
 - 作用1: 表示操作( 读取/设置 )时间和日期
 - 语法1: # date
 注: CST(当地时间)
 - 语法2: # date +%F  (等价于 # date "+%Y-%m-%d")
 - 语法3: # date "+%F %T" (等价于 # date "+%Y-%m-%D %H:%M:%S")

 - 作用2: 获取之前(之后) 某个时间 (备份)
 - 语法1: # date -d "-1day" "+%Y-%m-%d %H:%M:%S" (获取一天前的时间)
 - 语法2: # date -d "+1month" "+%Y-%m-%d %H:%M:%S"  (获取一个月后的时间)

 - 总结:
 %F: 表示完整的年月日
 %T: 表示完整的时分秒
 %Y: 表示四位年份
 %m: 表示两位月份 (带前导0)
 %d: 表示日期 (带前导0)
 %H: 表示小时 (带前导0)
 %M: 表示分钟 (带前导0)
 %S: 表示秒数 (带前导0)

# 8、cal 指令
 - 作用: 操作日历
 - 语法1: # cal (等价于 # cal -1)
 直接输出当前月份的日历
 - 语法2: # cal -3
 输出上个月、本月、下个月
 - 语法3: # cal -y 2019
 输出2019年整年的日历

# 9、clear/ctrl+L 指令
 - 作用: 清空当前shell
 该命令并不是真正的删除了当前信息,可以通过滚动调继续查看以前的信息

# 10、管道(重要)
 - 管道符: |
 - 作用1: 过滤
 栗子1: 查询~目录下包含 'y' 字母的文件名
 ````javascript
 # ls /|grep y
 ````
 - 作用2: 特殊用法
 栗子2: 通过管道实现less的等价效果
 ````javascript
 # cat ~/install.log | less
 ````
 - 作用3: 扩展
 栗子3: 统计~下文档的总个数
 ````javascript
 # ls ~ | wc -l
 ````

## 高级指令
# 1、hostname 指令
 - 作用: 操作(读取|操作)服务器的主机名
 - 语法1: # hostname (输出完整的主机名)
 - 语法2: # hostname -f (输出当前主机中的FQDN)
 FQDN：(Fully Qualified Domain Name)全限定域名：同时带有主机名和域名的名称。

# 2、id 指令
 - 作用: 查看用户的一些基本信息(用户id、用户组id、附加组id...)
 - 语法1: # id
 默认指定显示当前用户的信息
 - 语法2: # id 用户名
 显示指定用户的id (# id marron)

 - 验证
 ````bash
 # cat /etc/passwd  (查看用户id和组id)
 # cat /etc/group   (查看gid)
 ````
# 3、whomi 指令
 - 作用: 显示当前登录的用户名
 - 语法: # whoami
 一般用于shell脚本,用于获取当前操作的用户,方便记录日志

# 4、ps-ef 指令 (重点)
 - 作用1: 查看服务器的进程信息
 - 语法1: # ps

 - 作用2:
 - 语法2: # ps -ef
 参数含义:
 -e: 等价于"-A" 表示列出全部的进程
 -f: 显示全部的列(显示全字段)
 UID: 执行该进程的用户id
 PID: 进程id
 PPID: 该进程的父级进程id, 如果一个程序的父级进程找不到,该程序的进程称之为僵尸进程
 C: cpu占用率,其形式是百分数
 STIME: 该进程的启动时间
 TTY: 终端设备, "?"表示该进程并不是由终端发起
 TIME: 进程的执行时间
 CMD: 该进程的名称或者对应的路径

 - 栗子: 得到所有进程中名称为gnome-panel的进程
 ````bash
 # ps -ef | grep marron
 ````
 注: 至少有1个进程(该进程是搜索时产生的进程)

 - 栗子: 查看火狐浏览器的进程
 ````bash
 # ps -ef | grep firefox
 ````
 注: 先查看一次(未打开火狐浏览器),然后再查看一次(打开火狐浏览器)


# 5、top 指令
 - 作用: 查看服务器的进程占的资源
 - 退出:
 按下q键
 - 参数含义:
 PID: 进程id
 USER: 该进程对应的用户
 PR: 优先级
 VIRT: 虚拟内存  (申请的内存)
 RES: 常驻内存  (实际使用的内存)
 SHR: 共享内存 (和其他进程共同使用的内存)
 一个进程实际使用的内存 = 常驻内存(RES) - 共享内存 (SHR)
 S: 表示进程的状态 (sleeping, S表示睡眠, R表示运行)
 %CPU: 表示内存的占用百分比
 TIME+: 执行的时间
 COMMAND: 进程的名称或者路径
 - 运行top后的快捷键
 M: 表示将结果安装内存从高到低降序排列
 P: 表示将结果按照CPU使用率从高到低降序排列
 1: 当服务器拥有多个cpu的时候,可以使用"1"快捷键来切换是否展示显示各个CPU的详细信息

# 6、du -sh 指令
 - 作用: 查看目录的真实大小
 - 语法: # du -sh 目录路径
 - 选项含义:
 -s: summaries,只显示汇总的大小
 -h: 表示以较高可读性的形式进行显示

 - 栗子1: 统计"/root/marron111"目录的的实际大小
 ````bash
 # du -sh /root/marron111
 ````

 - 栗子2: 统计"/etc" 目录的实际大小
 ````bash
 # du -sh /etc
 ````
# 7、find 指令
 - 作用: 用于查找文件
 - 语法: # find 路径范围 选项 选项的值
 - 选项:
 -name: 按照文档名称进行搜索(支持模糊搜索)
 -type: 按照文档的类型进行搜索
  文档类型: "-"表示文件(在使用 find 的时候需要用f来替换),"d"表示文件夹

 - 栗子1: 使用 find 来搜索 httpd.conf
 ````bash
 # find / -name httpd.conf
 ````

 - 栗子2: 搜索 /etc 目录下所有的conf后缀文件
 ````bash
 # find /etc -name *.conf
 ````

 - 栗子3: 统计 /etc 目录下所有conf后缀文件的数量
 ````bash
 # find /etc -name *.conf | wc -l
 ````

 - 栗子4: 统计 /etc/sane.d/ 目录下所有文件的数量
 ````bash
 # find /etc/sane.d -type f | wc -l
 ````
 注: find 可以搜到隐藏文件

# 8、service 指令(重点)
 - 作用: 用于控制软件的 启动/停止/重启
 - 语法: # service 服务名 start/stop/restart

 - 栗子: 需要启动本机安装的 Apache (网站服务器软件), 其服务名 httpd
````bash
# service httpd start
````

 - 栗子2: 查询 Apache 开启的进程
 ````bash
 # ps -ef | grep httpd
 ````

# 9、kill 指令(重点)
 - 作用: 杀死进程
 当遇到僵尸进程或者处于某些原因需要关闭进程的时候
 - 语法: # kill 进程ID(PID)
 - 栗子: 关掉 Apache进程
 ````bash
 # ps -ef | grep httpd  (找到所有apache进程)
 # kill PID (进程ID,第二列的数字)
 ````
 - 语法2: # killall 进程名称  (不需要提前通过ps去查询)
 - 作用2: 杀掉该名称的进程

# 10、ifconfig (重点)
 - 作用: 用于操作网卡相关的指令
 - 语法: #ifconfig (获取网卡信息)
 - 参数说明:
 eth0: 是对外的网络地址
 lo: 是本地的回环网络地址
 inet addr: 后面紧跟的是 ipv4地址

# 11、reboot 指令
 - 作用: 重新启动计算机
 - 语法1: # reboot
 - 语法2: # reboot -w (模拟重新,但是不重启,只写关机与开机的日志信息)

# 12、shutdown 指令
 - 作用: 关机 (慎用)
 - 语法1: # shutdown -h now  (或 #shutdown -h 20:38  "关机提升")
 括号里面的表示指定时间关机
 - 栗子: 指定时间关机,查看关机提示
 ````bash
 # shutdown -h 20:45 "please save your files"
 ````
 注:
 使用ctrl +c 取消
 在centOS 7.0 以后, 可以使用 shutdown -c 取消

# 13、uptime 指令
 - 作用: 输出计算机的持续在线时间 (从开机以来到现在运行的时间)
 - 语法: # uptime

# 14、uname 指令
 - 作用: 获取计算机操作系统相关信息
 - 语法: # uname  (获取操作系统的类型)
 - 语法2: # uname -a (获取全部的内容)
 - 参数说明:
 2.6.32-754.el6.x86_64: 内核的版本
 SMP Tue Jun 19 21:16:04 UTC 2018: 系统发行的时间
 GUN/Linux: 代表加入了开源GUN计划

# 15、netstat -tnlp 指令
 - 作用: 查看网络的连接状态
 - 语法:# netstat -tnlp
 - 选项说明:
-t: 表示列出 tcp 协议的连接
-n: 表示将域名转换成ip地址,同时将协议名转换成端口号,来显示输出
-l: 过滤出"state(状态)"列中,值为LISTEN(监听)的连接
-p: 发起连接的进程id和进程名称

# 16、man 指令
 - 作用: manual, 手册 (包含了 Linux 中全部命令手册, 英文)
 - 语法: # man 命令 (退出 Q)
 - 栗子: 查询cp指令的用法
 ````bash
 # man cp
 ````


## 监测点
1. 如何通过命令行重启 linux 操作系统?
````bash
# reboot
````

2. 在命令行中快速删除光标 前/后 的内容
删除之间的内容
````bash
ctrl + u
````
删除之后的内容
````bash
ctrl + k
````

3. 删除 /tmp 目录下所有A开头的文件
````bash
# rm -f /tmp A*
````

4. 把 etc/passwd 备份到 /tmp 目录下
````bash
# cp /etc/passwd /tmp
````

5. 查看系统最后创建的3个用户
````bash
# tail -3 /etc/passwd
````
 - 注: 用户信息都保存在 /etc/passwd 中, 可以使用cat指令查看

6. 统计当前系统中一共有多少个用户
````bash
# wc -l /etc/passwd
````

7. 如何创建 /tmp/test.conf 文件?
````bash
# touch /tmp/test.conf
````

8. 如何打开 /tmp/test.conf
````bash
# vim /tmp/test.conf
````

9. 如何查看 /etc/passwd 的头3行和尾3行?
````bash
# head -3 /etc/passwd
# tail -3 /etc/passwd
````

10. 如何一次性的创建目录 /text/1/2/3/4
````bash
mkdir -r /text/1/2/3/4
````

11. 如何快速返回到当前账户的家目录
````bash
# cd ~
````

12. 如何查看 /etc 所占的磁盘空间
````bash
# du -sh /etc
````
 - 注：查看目录的真实大小

13. 如何删除 /text 目录下所有的文件
````bash
# rm  -rf /text/*
````
 - 注: 是/text 目录下面的所有文件,不包含 /text 目录

14. 尝试启动Apache服务,并检查是否启动成功
````bash
# service httpd start
# ps -ef | grep httpd
````
 - 注: 关闭所有Apache服务进程, # killall httpd




